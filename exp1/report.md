# MPI 异步通信小作业 实验报告 

谭龙涛 2019010874

## 任务一

| 编号 | 消息长度 | 计算量 | 总耗时      |
| ---- | -------- | ------ | ----------- |
| 1    | 16384    | 0      | 0.253294 ms |
| 2    | 32768    | 0      | 0.52925 ms  |
| 3    | 65536    | 0      | 0.729812 ms |
| 4    | 131072   | 0      | 1.17019 ms  |
| 5    | 262144   | 0      | 2.05652 ms  |
| 6    | 524288   | 0      | 3.82802 ms  |
| 7    | 1048576  | 0      | 7.26991 ms  |
| 8    | 2097152  | 0      | 14.1772 ms  |
| 9    | 4194304  | 0      | 28.8725 ms  |
| 10   | 8388608  | 0      | 55.9435 ms  |
| 11   | 16777216 | 0      | 120.597 ms  |
| 12   | 33554432 | 0      | 264.648 ms  |

- 每次消息长度是倍增的，总耗时的变化趋势是如何的？

大致也随着消息长度倍增而倍增。

- 为什么会有这样的趋势？

因为MPI底层通信过程的带宽基本是一定的，因此总耗时和消息长度大致成比例变化。

## 任务二

| 编号 | 消息长度  | 计算量 | mpi_sync 总耗时 | mpi_async  总耗时 |
| ---- | --------- | ------ | --------------- | ----------------- |
| 1    | 100000000 | 10     | 842.347 ms      | 666.981 ms        |
| 2    | 100000000 | 20     | 1042.3 ms       | 840.994 ms        |
| 3    | 100000000 | 40     | 1241.88 ms      | 851.34 ms         |
| 4    | 100000000 | 80     | 1547.89 ms      | 840.415 ms        |
| 5    | 100000000 | 160    | 2350.84 ms      | 1600.37 ms        |

- 通信时间和计算时间满足什么关系时，非阻塞通信程序能完美掩盖通信时间？

计算时间大于通信时间时，由于在计算完毕后才来检查request，因此如果通行时间更短的话就对总耗时没有影响了。

- 简述两份代码的不同之处。

非阻塞版本调用`Isend`接口，且需要为request分配空间，在计算结束后需要Wait检查request对象来检验通信完成情况。

